<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Rave3eN â€” Official</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://sdk.scdn.co/spotify-player.js"></script>

<style>
:root{
  --bg:#000;
  --neon1:#9b5cff;
  --neon2:#00d2ff;
  --neon3:#4fc3ff;
  --glass:rgba(255,255,255,0.05);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;
  font-family:'Rajdhani',system-ui,Segoe UI,Roboto,Arial;
  background:#000;
  color:#e9eef8;
  overflow:hidden;
}
/* Header */
header{
  position:fixed;top:0;left:0;width:100%;
  padding:15px 40px;
  display:flex;align-items:center;justify-content:space-between;
  background:rgba(0,0,0,0.4);backdrop-filter:blur(10px);
  box-shadow:0 0 25px rgba(0,0,0,0.6);z-index:10;
}
header .logo{display:flex;align-items:center;gap:10px;}
header .logo img{height:45px;filter:drop-shadow(0 0 10px var(--neon2));}
header .logo span{font-family:'Orbitron';font-size:1.6rem;color:var(--neon2);text-shadow:0 0 8px var(--neon2);}
header .live-title{
  font-family:'Orbitron';font-size:1.4rem;color:var(--neon2);
  text-shadow:0 0 15px var(--neon2),0 0 30px var(--neon1);
  animation:glow 3s ease-in-out infinite alternate;
}
@keyframes glow{
  from{text-shadow:0 0 10px var(--neon2);}
  to{text-shadow:0 0 25px var(--neon1);}
}
.social-header{display:flex;gap:18px;}
.social-header a{
  width:42px;height:42px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  background:rgba(255,255,255,.05);
  color:var(--neon2);font-size:1.2rem;
  box-shadow:0 0 12px rgba(155,92,255,.4),inset 0 0 8px rgba(0,210,255,.3);
  transition:.3s;
}
.social-header a:hover{
  color:var(--neon1);
  transform:scale(1.15);
  box-shadow:0 0 22px rgba(0,210,255,.7),inset 0 0 10px rgba(155,92,255,.4);
}
/* Layout */
.container{display:flex;justify-content:center;margin-top:120px;}
.player-box{
  width:750px;max-width:90vw;
  background:var(--glass);border-radius:20px;
  backdrop-filter:blur(10px);padding:20px;
  text-align:center;box-shadow:0 0 60px rgba(0,210,255,.4);
}
.top-nav{display:flex;justify-content:center;gap:25px;margin-bottom:22px;}
.top-nav a{
  min-width:90px;height:46px;padding:0 16px;border-radius:999px;
  display:flex;align-items:center;justify-content:center;
  background:rgba(255,255,255,0.06);color:var(--neon2);
  text-decoration:none;font-weight:600;transition:.3s;
  box-shadow:0 0 18px rgba(155,92,255,0.55);
}
.top-nav a:hover{color:var(--neon1);transform:scale(1.05);}
iframe{border:0;width:100%;border-radius:15px;}
canvas#waves{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;}
</style>
</head>

<body>
<canvas id="waves"></canvas>

<header>
  <div class="logo">
    <img src="logo druck.png" alt="Rave3eN Logo">
    <span>Rave3eN</span>
  </div>
  <div class="live-title">ðŸŽ§ Live on Twitch</div>
  <div class="social-header">
    <a href="https://www.youtube.com/@rave3en30" target="_blank"><i class="fab fa-youtube"></i></a>
    <a href="https://www.tiktok.com/@rave3en" target="_blank"><i class="fab fa-tiktok"></i></a>
    <a href="https://www.instagram.com/rave3en_/" target="_blank"><i class="fab fa-instagram"></i></a>
    <a href="https://discord.gg/3TbArexH5H" target="_blank"><i class="fab fa-discord"></i></a>
  </div>
</header>

<div class="container">
  <div class="player-box">
    <nav class="top-nav">
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="#events">Events</a>
    </nav>
    <iframe src="https://player.twitch.tv/?channel=Rave3eN&parent=rave3en.github.io&muted=true" height="420"></iframe>
  </div>
</div>

<script>
// ---------- Hintergrund-Waves ----------
const canvas=document.getElementById('waves');
const ctx=canvas.getContext('2d');
let w,h,t=0,ampScale=1;
function resize(){w=canvas.width=innerWidth;h=canvas.height=innerHeight;}
window.addEventListener('resize',resize);resize();
function drawWave(color,amp,freq,speed,offset){
  ctx.beginPath();
  for(let x=0;x<w;x++){
    const y=h/2 + Math.sin(x*freq + t*speed + offset)*amp*ampScale;
    ctx.lineTo(x,y);
  }
  ctx.strokeStyle=color;
  ctx.lineWidth=2;
  ctx.shadowBlur=15;
  ctx.shadowColor=color;
  ctx.stroke();
}
function animate(){
  ctx.fillStyle='rgba(0,0,0,0.3)';
  ctx.fillRect(0,0,w,h);
  drawWave('#9b5cff',60,0.008,0.012,0);
  drawWave('#00d2ff',40,0.009,0.015,3);
  drawWave('#4fc3ff',25,0.010,0.018,6);
  t+=0.02;
  requestAnimationFrame(animate);
}
animate();

// ---------- Spotify Visualizer ----------
const CLIENT_ID = '3734a32da72c4be1a7e9ea4ea3b00a00';
let accessToken = '';

function getTokenFromHash(){
  if(window.location.hash){
    const hash=window.location.hash.substring(1).split('&')
      .reduce((res,item)=>{let p=item.split('=');res[p[0]]=p[1];return res;},{});
    accessToken=hash.access_token||'';
    window.location.hash='';
  }
}
getTokenFromHash();

window.onSpotifyWebPlaybackSDKReady=()=>{
  if(!accessToken){
    console.warn('Kein Spotify-Token. Bitte Ã¼ber spotify-auth.html einloggen.');
    return;
  }
  const player=new Spotify.Player({
    name:'Rave3eN Web Player',
    getOAuthToken:cb=>cb(accessToken),
    volume:0.5
  });
  player.addListener('player_state_changed',state=>{
    if(!state)return;
    const loudness=state.position/state.duration;
    ampScale=0.8+Math.abs(Math.sin(loudness*Math.PI))*0.6;
  });
  player.connect();
};
</script>
</body>
</html>
