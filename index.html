<!-- RAVE3EN â€“ LIVE EMBLEM (klein & fein) -->
<div class="r3-live" id="r3-live">
  <span class="dot" aria-hidden="true"></span>
  <span class="label">LIVE</span>
  <button class="watch" id="r3-watch" aria-label="Stream abspielen">Ansehen</button>
</div>

<!-- Mini-Container fÃ¼r den kleinen Player (klappt beim Klick aus) -->
<div class="r3-mini" id="r3-mini" hidden>
  <div id="r3-player"></div>
  <button class="mute" id="r3-mute" aria-label="Ton an/aus">ðŸ”Š 0.1</button>
</div>

<!-- Styles -->
<style>
.r3-live{
  display:inline-flex;align-items:center;gap:8px;
  background:linear-gradient(90deg,#9b5cff, #00d2ff);
  color:#08101a;font:700 13px/1.1 Rajdhani,system-ui,Segoe UI,Roboto,Arial;
  padding:6px 10px;border-radius:999px;box-shadow:0 4px 16px rgba(0,0,0,.35);
}
.r3-live .dot{
  width:8px;height:8px;border-radius:50%;
  background:#ff2d55;box-shadow:0 0 10px #ff2d55; display:inline-block;
  animation:r3-pulse 1.2s infinite ease-in-out alternate;
}
@keyframes r3-pulse{
  from{transform:scale(.9); box-shadow:0 0 6px #ff2d55;}
  to{transform:scale(1.15); box-shadow:0 0 14px #ff2d55;}
}
.r3-live .label{letter-spacing:.6px}
.r3-live .watch{
  appearance:none;border:0;background:#08101a;color:#cfe8ff;cursor:pointer;
  padding:6px 10px;border-radius:999px;font-weight:800;
}
.r3-live .watch:hover{filter:brightness(1.05)}
.r3-mini{
  width:320px; /* schÃ¶n klein */
  border-radius:12px;overflow:hidden;margin-top:8px;
  background:#000;border:1px solid rgba(255,255,255,.08);position:relative;
  box-shadow:0 8px 24px rgba(0,0,0,.5);
}
#r3-player{width:100%;height:180px;} /* 16:9 mini */
.r3-mute{
  position:absolute;right:8px;bottom:8px;z-index:5;
  background:rgba(255,255,255,.12);backdrop-filter:blur(6px);
  color:#fff;border:0;border-radius:10px;padding:6px 8px;font-weight:700;cursor:pointer
}
</style>

<!-- Twitch Player -->
<script src="https://player.twitch.tv/js/embed/v1.js"></script>
<script>
(function(){
  const DOMAIN = "www.rave3en.de";       // <- falls nÃ¶tig anpassen
  const CHANNEL = "Rave3eN";             // <- dein Kanal
  const mini = document.getElementById('r3-mini');
  const btnWatch = document.getElementById('r3-watch');
  const btnMute = document.getElementById('r3-mute');
  let player = null;
  let unlocked = false;

  function createPlayer(){
    if(player) return;
    player = new Twitch.Player("r3-player", {
      width: "100%",
      height: "100%",
      channel: CHANNEL,
      parent: [DOMAIN, "rave3en.github.io","localhost"],
      autoplay: true,
      muted: true  // Autoplay-Policy: erst stumm starten
    });
    // Sobald irgendeine Interaktion erfolgt, setzen wir LautstÃ¤rke 0.1
    const unlockVolume = () => {
      if(player){ player.setMuted(false); player.setVolume(0.1); }
      unlocked = true;
      window.removeEventListener('pointerdown', unlockVolume, {once:true});
    };
    window.addEventListener('pointerdown', unlockVolume, {once:true});
  }

  btnWatch.addEventListener('click', () => {
    mini.hidden = false;
    createPlayer();
    // Wenn schon Interaktion â†’ direkt 0.1
    if(unlocked && player){ player.setMuted(false); player.setVolume(0.1); }
  });

  btnMute.addEventListener('click', () => {
    if(!player) return;
    const muted = player.getMuted?.();
    if(muted){
      player.setMuted(false); player.setVolume(0.1);
      btnMute.textContent = "ðŸ”Š 0.1";
    }else{
      player.setMuted(true);
      btnMute.textContent = "ðŸ”‡";
    }
  });
})();
</script>
